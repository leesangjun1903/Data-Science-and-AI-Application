# PubTables-1M: Towards comprehensive table extraction from unstructured documents

**핵심 주장:**  
PubTables-1M은 과학 논문 PDF에서 표 구조를 완전하고 일관되게 추출하기 위해, 기존 데이터셋의 한계였던 과분할(oversegmentation) 문제를 해결하고, 표 검출(Table Detection), 구조 인식(Table Structure Recognition), 기능 분석(Functional Analysis)을 통합하여 학습 가능한 대규모 표 추출 데이터셋을 제안한다.  

**주요 기여:**  
1. 거의 100만 개의 표(annotation) 포함으로 기존 최대 규모 데이터셋 대비 약 두 배 확장.  
2. 모든 셀(cell)과 행(row), 열(column)에 대한 경계 상자(bounding box) 및 투영 행 헤더(projected row header) 주석 제공.  
3. **과분할 교정(canonicalization)** 알고리즘 도입: 중복·분할된 헤더 셀 병합을 통해 논리적 구조 일관성 보장.  
4. 어노테이션 품질 제어: PDF와 XML 간 정렬, 편집 거리 및 단어-셀 겹침 비율 검증을 통한 자동 필터링.  
5. DETR(Detection Transformer)을 이용한 세 가지 태스크(TD, TSR, FA) 통합 모델 제안 및 state-of-the-art 성능 달성.  

***

## 1. 해결하고자 하는 문제  
기존 대규모 크라우드소싱 표 구조 데이터셋은  
- 과분할(oversegmentation)로 인한 모호·불일치 주석  
- 셀 외에 행·열 헤더나 빈 셀 주석 부재  
- 위치 정보 누락으로 모델 학습·평가 불완전  
등의 문제를 가지며, 표 추출 전 과정(TD, TSR, FA)을 단일 프레임워크로 다룰 대규모 고품질 데이터가 부족했다.

***

## 2. 제안 방법

### 2.1 정렬 및 위치 보완  
- PDF 문자 위치()와 XML 태그 텍스트를 Needleman–Wunsch 알고리즘으로 정렬.  
- 각 셀의 텍스트 셀 바운딩 박스(text cell bbox)를 문자 바운딩들의 합집합으로 계산.  
- 표 전체, 각 행·열 경계 상자 완성:  
  -  표 bbox = 모든 텍스트 셀 bbox의 합집합  
  -  행 bbox: 표의 xmin/xmax, 각 행 텍스트의 ymin/ymax  
  -  열 bbox: 표의 ymin/ymax, 각 열 텍스트의 xmin/xmax  

### 2.2 Canonicalization (과분할 교정)  
- 헤더 셀 병합 규칙 (Algorithm 1)  
  1) 빈 셀 분할 후:  
     - 최상단 행이 빈 셀로 시작하면 열 헤더에 포함  
     - 온전한 단일 열 스팬 셀 완성될 때까지 추가 행 포함  
  2) 투영 행 헤더(PRH) 식별: 첫 열에 단일 논공백 셀 있는 비헤더 행  
  3) 열 헤더·PRH 병합: 동일 스팬·인접 빈 셀 재귀적 병합  
  4) 행 헤더 병합: 첫 열 스팬 또는 빈 셀 아래 병합  

- **과분할 조건**: 내부 노드는 두 자식 이상, 중앙 정렬된 셀은 병합 대상 제외, 주로 수직 방향 병합  

### 2.3 품질 제어  
- 중첩된 행·열이 있는 표 제거  
- 셀별 평균 편집 거리(normalized edit distance) ≤ 0.05 필터  
- 단어-그리드셀 겹침 비율 ≥ 0.9 유지  
- 객체 수 > 100인 표 이상치 제거 (< 0.1% 제거)  

***

## 3. 모델 구조 및 학습

### 3.1 객체 검출 프레임워크  
- **TD**: 클래스 ‘table’, ‘table rotated’  
- **TSR + FA**: ‘table’, ‘column’, ‘row’, ‘column header’, ‘projected row header’, ‘spanning cell’ (implicit ‘grid cell’)  

모든 경계 상자를 “dilated” 방식으로 인접 객체와 간극 없이 확장.

### 3.2 DETR 기반 구현  
- Backbone: ResNet-18 (ImageNet 프리트레인, 초기 레이어 고정)  
- Object queries: TD → 15, TSR+FA → 125  
- 학습: 20 에폭, 기본 하이퍼파라미터, LR 초기값 5e-5, no-object 가중치 0.4, LR drop = 1, γ = 0.9  

***

## 4. 성능 및 한계

| 태스크                  | 모델            | AP    | AP50  | AP75  | AR    |
|-----------------------|---------------|-------|-------|-------|-------|
| **TD**                | Faster R-CNN  | 0.825 | 0.985 | 0.927 | 0.866 |
|                       | **DETR**      | 0.966 | 0.995 | 0.988 | 0.981 |
| **TSR + FA**          | Faster R-CNN  | 0.722 | 0.815 | 0.785 | 0.762 |
|                       | **DETR**      | 0.912 | 0.971 | 0.948 | 0.942 |

- DETR는 Faster R-CNN 대비 모든 태스크에서 우월한 위치 정확도 및 검출력 확보.  
- **Canonical vs. Non-Canonical**: Canonical 데이터로 학습·평가 시 복잡 표(스팬 셀 포함) 정확도↑ (AccCont: 0.536→0.694)  

**한계:**  
- PMCOA 전용 가정으로 다른 도메인 데이터(예: 금융 문서) 적용 시 추가 조정 필요  
- 행 헤더 전체 추론은 미흡, PRH만 대응  
- 다중 페이지 표, 복합 레이아웃 처리 미지원  

***

## 5. 일반화 성능 향상 가능성  
1. **노이즈 감소 및 일관된 구조**: 과분할 제거로 평가·학습 시 모호성 제거 → 모델의 실제 구조 이해력 강화.  
2. **다양한 표 포맷 대응**: 빈 셀 포함 완전 경계 처리로 미표기·비표준 셀도 학습  
3. **Transformer 기반 객체 검출**: DETR의 글로벌 컨텍스트 학습 능력 → 새로운 레이아웃·도메인 전이학습에 유리  
4. **셀·행·열 계층적 주석**: 풍부한 레이블이 모델의 일반화 학습 신호로 작용  

이로써, PubTables-1M 기반 학습 모델은 과학 문헌 외 금융·법률·공공 문서 등 이종 도메인으로 확장 가능성이 높아진다.

***

## 6. 향후 연구 방향 및 고려 사항  
- **도메인 확장**: 금융·의료·법률 문서 등 비과학 분야 표 주석 및 canonicalization 규칙 검증  
- **행 헤더 완전화**: 다단계 행 헤더 전체 자동 감지·병합 로직 개발  
- **다중 페이지·복합 레이아웃 지원**: 표 분할·병합, 회전·병합 셀 복원 기법 추가  
- **엔드투엔드 문서 이해**: 표 추출 이후 정보 검색·질의응답 파이프라인 통합 연구  
- **효율성 최적화**: 대규모 데이터셋 처리 및 실시간 추출 모델 경량화  

PubTables-1M은 표 추출 연구의 새로운 표준을 제시하며, **일관성 있고 풍부한 주석** 기반으로 다양한 도메인·모델에 대한 일반화 성능 향상 연구를 가속화할 것이다.

[1] https://ppl-ai-file-upload.s3.amazonaws.com/web/direct-files/attachments/22370781/0ca0f73c-4655-41bc-8b72-872b0d731957/2110.00061v3.pdf
